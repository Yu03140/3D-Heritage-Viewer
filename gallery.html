<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>3Dæ–‡ç‰©å±•é¦† - ä¸ªäººæ•°å­—åšç‰©é¦†</title>
    <link rel="icon" type="image/png" href="favicon.png">
    <link rel="stylesheet" href="styles.css">
    
    <!-- Primary Meta Tags -->
    <meta name="title" content="3Dæ–‡ç‰©å±•é¦† - ä¸ªäººæ•°å­—åšç‰©é¦†">
    <meta name="description" content="æ¢ç´¢çè´µæ–‡ç‰©ï¼ŒæŒ‰æœä»£å’Œç±»åˆ«æµè§ˆå†å²æ–‡æ˜">
</head>
<body style="margin: 0; padding: 0; overflow-x: hidden; background: #f5f5f5;">
    <!-- é¡¶éƒ¨å¯¼èˆª -->
    <nav class="museum-nav">
        <div class="nav-container">
            <div class="nav-left">
                <a href="index.html" class="back-home">
                    <span class="back-icon">â†</span>
                    <span>è¿”å›é¦–é¡µ</span>
                </a>
                <div class="nav-title">
                    <span class="title-icon">ğŸ›ï¸</span>
                    <span>ä¸ªäººæ•°å­—åšç‰©é¦†</span>
                </div>
            </div>
            <div class="nav-right">
                <button id="tutorialBtn" class="nav-btn">ä½¿ç”¨æ•™ç¨‹</button>
                <button id="settingsBtn" class="nav-btn">ç³»ç»Ÿè®¾ç½®</button>
            </div>
        </div>
    </nav>

    <!-- ä¸»è¦å†…å®¹ -->
    <main class="gallery-main">
        <!-- é¡µé¢æ ‡é¢˜ -->
        <section class="gallery-header">
            <div class="header-container">
                <h1 class="gallery-title">æ–‡ç‰©å±•è§ˆé¦†</h1>
                <p class="gallery-subtitle">æŒ‰å†å²æœä»£æµè§ˆçè´µæ–‡ç‰©</p>
                <div class="breadcrumb">
                    <span id="currentPath">é€‰æ‹©æœä»£</span>
                </div>
            </div>
        </section>

        <!-- æœä»£é€‰æ‹©åŒºåŸŸ -->
        <section class="dynasty-selection" id="dynastySelection">
            <div class="dynasty-container">
                <div class="dynasty-grid">
                    <div class="dynasty-card" data-dynasty="å¤å•†">
                        <div class="dynasty-image">
                            <div class="dynasty-icon">ğŸº</div>
                            <div class="dynasty-period">çº¦å…¬å…ƒå‰2070-1046å¹´</div>
                        </div>
                        <div class="dynasty-info">
                            <h3>å¤å•†æ—¶æœŸ</h3>
                            <p>ä¸­åæ–‡æ˜çš„èµ·æºæ—¶æœŸï¼Œé’é“œæ–‡åŒ–çš„èŒèŠ½ä¸å‘å±•</p>
                            <div class="dynasty-stats">
                                <span>1ä»¶æ–‡ç‰©</span>
                            </div>
                        </div>
                    </div>

                    <div class="dynasty-card" data-dynasty="å”ä»£">
                        <div class="dynasty-image">
                            <div class="dynasty-icon">ğŸ’ƒ</div>
                            <div class="dynasty-period">å…¬å…ƒ618-907å¹´</div>
                        </div>
                        <div class="dynasty-info">
                            <h3>å”ä»£</h3>
                            <p>ç››ä¸–ç‹æœï¼Œæ–‡åŒ–è‰ºæœ¯è¾¾åˆ°é«˜å³°çš„é»„é‡‘æ—¶æœŸ</p>
                            <div class="dynasty-stats">
                                <span>1ä»¶æ–‡ç‰©</span>
                            </div>
                        </div>
                    </div>

                    <div class="dynasty-card" data-dynasty="æ¸…ä»£">
                        <div class="dynasty-image">
                            <div class="dynasty-icon">ğŸ«–</div>
                            <div class="dynasty-period">å…¬å…ƒ1644-1912å¹´</div>
                        </div>
                        <div class="dynasty-info">
                            <h3>æ¸…ä»£</h3>
                            <p>ä¸­å›½æœ€åä¸€ä¸ªå°å»ºç‹æœï¼Œå·¥è‰ºæŠ€æœ¯ç™»å³°é€ æ</p>
                            <div class="dynasty-stats">
                                <span>1ä»¶æ–‡ç‰©</span>
                            </div>
                        </div>
                    </div>

                    <div class="dynasty-card" data-dynasty="å¤ä»£ä¸–ç•Œ">
                        <div class="dynasty-image">
                            <div class="dynasty-icon">ğŸ¥</div>
                            <div class="dynasty-period">å¤ä»£æ–‡æ˜</div>
                        </div>
                        <div class="dynasty-info">
                            <h3>å¤ä»£ä¸–ç•Œ</h3>
                            <p>ä¸–ç•Œå„åœ°å¤ä»£æ–‡æ˜çš„çè´µé—å­˜</p>
                            <div class="dynasty-stats">
                                <span>1ä»¶æ–‡ç‰©</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- æ–‡ç‰©åˆ—è¡¨åŒºåŸŸï¼ˆåˆå§‹éšè—ï¼‰ -->
        <section class="artifacts-section" id="artifactsSection" style="display: none;">
            <div class="artifacts-container">
                <div class="section-header">
                    <button class="back-btn" id="backToDynasty">
                        <span>â†</span>
                        <span>è¿”å›æœä»£é€‰æ‹©</span>
                    </button>
                    <h2 id="currentDynastyTitle">æœä»£æ–‡ç‰©</h2>
                </div>
                <div class="artifacts-grid" id="artifactsGrid">
                    <!-- æ–‡ç‰©å°†é€šè¿‡JavaScriptåŠ¨æ€åŠ è½½ -->
                </div>
            </div>
        </section>
    </main>

    <!-- ç±»åˆ«é€‰æ‹©å¼¹çª— -->
    <div class="category-modal" id="categoryModal">
        <div class="modal-overlay"></div>
        <div class="modal-content">
            <div class="modal-header">
                <h3>é€‰æ‹©æ–‡ç‰©ç±»åˆ«</h3>
                <button class="modal-close" id="modalClose">Ã—</button>
            </div>
            <div class="modal-body">
                <div class="category-grid" id="categoryGrid">
                    <!-- ç±»åˆ«é€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>
        </div>
    </div>

    <!-- é¡µè„š -->
    <footer class="gallery-footer">
        <div class="footer-content">
            <p>æ¢ç´¢å†å²æ–‡æ˜ | æ„Ÿå—æ–‡ç‰©é­…åŠ› | <a href="index.html">è¿”å›é¦–é¡µ</a></p>
        </div>
    </footer>

    <script type="module">
        // æ–‡ç‰©æ•°æ®ç»“æ„
        const artifactsData = {
            "å¤å•†": {
                "é’é“œå™¨": [
                    {
                        id: "copper-chew.gltf",
                        title: "äºŒé‡Œå¤´é’é“œå™¨",
                        description: "ä¸­å›½é’é“œæ—¶ä»£æ—©æœŸä»£è¡¨ä½œå“ï¼Œè§è¯äº†å¤å•†æ–‡æ˜çš„é’é“œé“¸é€ æŠ€æœ¯å‘å±•å†ç¨‹ã€‚",
                        features: ["é’é“œé“¸é€ ", "å¤å•†æ–‡æ˜"],
                        period: "çº¦å…¬å…ƒå‰1600-1046å¹´"
                    }
                ]
            },
            "å”ä»£": {
                "é›•å¡‘": [
                    {
                        id: "modelNew.gltf",
                        title: "å”ä»£ä¹èˆä¿‘",
                        description: "å”ä»£ä¸‰å½©é‡‰é™¶å·¥è‰ºä»£è¡¨ä½œï¼Œç”ŸåŠ¨å±•ç°äº†ç››å”æ—¶æœŸå®«å»·éŸ³ä¹èˆè¹ˆçš„ç¹è£æ™¯è±¡ã€‚",
                        features: ["å®«å»·ä¹èˆ", "ä¸‰å½©é‡‰é™¶"],
                        period: "å…¬å…ƒ618-907å¹´"
                    }
                ]
            },
            "æ¸…ä»£": {
                "é™¶ç“·å™¨": [
                    {
                        id: "teacup.gltf",
                        title: "æ¸…ä»£é’ç“·èŒ¶å£¶",
                        description: "è±†é’é‡‰åˆ¶ä½œå·¥è‰ºå¤æ‚ï¼Œé‡‰è´¨åšç¡¬ã€è‰²æ³½æ·±æ¶¦ï¼Œå±•ç°äº†æ¸…ä»£æ™¯å¾·é•‡ç²¾æ¹›çš„åˆ¶ç“·æŠ€æœ¯ã€‚",
                        features: ["è±†é’é‡‰å·¥è‰º", "æ™¯å¾·é•‡åˆ¶"],
                        period: "å…¬å…ƒ1644-1912å¹´"
                    }
                ]
            },
            "å¤ä»£ä¸–ç•Œ": {
                "ä¹å™¨": [
                    {
                        id: "egypt_djembe_drum.glb",
                        title: "åŸƒåŠé‡‘è´é¼“",
                        description: "è¥¿éæ›¼ä¸æ–‡åŒ–ä»£è¡¨æ€§æ‰“å‡»ä¹å™¨ï¼Œä¼ ç»Ÿå¾’æ‰‹æ¼”å¥ï¼Œè•´å«ç€ä¸°å¯Œçš„éƒ¨è½æ–‡åŒ–å†…æ¶µã€‚",
                        features: ["è¥¿éæ–‡åŒ–", "æ‰“å‡»ä¹å™¨"],
                        period: "å¤ä»£æ–‡æ˜"
                    }
                ]
            }
        };

        // çŠ¶æ€ç®¡ç†
        let currentDynasty = null;
        let currentCategory = null;

        // DOMå…ƒç´ 
        const dynastySelection = document.getElementById('dynastySelection');
        const artifactsSection = document.getElementById('artifactsSection');
        const categoryModal = document.getElementById('categoryModal');
        const categoryGrid = document.getElementById('categoryGrid');
        const artifactsGrid = document.getElementById('artifactsGrid');
        const currentPath = document.getElementById('currentPath');
        const currentDynastyTitle = document.getElementById('currentDynastyTitle');
        const backToDynasty = document.getElementById('backToDynasty');
        const modalClose = document.getElementById('modalClose');

        // é¡µé¢å¯¼èˆª
        document.getElementById('settingsBtn').addEventListener('click', function() {
            window.location.href = 'settings.html';
        });
        
        document.getElementById('tutorialBtn').addEventListener('click', function() {
            window.location.href = 'tutorial.html';
        });

        // æœä»£å¡ç‰‡ç‚¹å‡»äº‹ä»¶
        document.querySelectorAll('.dynasty-card').forEach(card => {
            card.addEventListener('click', function() {
                const dynasty = this.getAttribute('data-dynasty');
                showCategoryModal(dynasty);
            });
        });

        // æ˜¾ç¤ºç±»åˆ«é€‰æ‹©å¼¹çª—
        function showCategoryModal(dynasty) {
            currentDynasty = dynasty;
            const categories = Object.keys(artifactsData[dynasty] || {});
            
            if (categories.length === 0) {
                alert('è¯¥æœä»£æš‚æ— æ–‡ç‰©å±•ç¤º');
                return;
            }

            // å¦‚æœåªæœ‰ä¸€ä¸ªç±»åˆ«ï¼Œç›´æ¥è¿›å…¥æ–‡ç‰©å±•ç¤º
            if (categories.length === 1) {
                currentCategory = categories[0];
                showArtifacts(dynasty, categories[0]);
                return;
            }

            // ç”Ÿæˆç±»åˆ«é€‰é¡¹
            categoryGrid.innerHTML = '';
            categories.forEach(category => {
                const categoryItem = document.createElement('div');
                categoryItem.className = 'category-item';
                categoryItem.innerHTML = `
                    <div class="category-icon">${getCategoryIcon(category)}</div>
                    <div class="category-name">${category}</div>
                    <div class="category-count">${artifactsData[dynasty][category].length}ä»¶æ–‡ç‰©</div>
                `;
                categoryItem.addEventListener('click', () => {
                    currentCategory = category;
                    categoryModal.style.display = 'none';
                    showArtifacts(dynasty, category);
                });
                categoryGrid.appendChild(categoryItem);
            });

            categoryModal.style.display = 'block';
        }

        // è·å–ç±»åˆ«å›¾æ ‡
        function getCategoryIcon(category) {
            const icons = {
                'é’é“œå™¨': 'ğŸº',
                'é™¶ç“·å™¨': 'ğŸ«–',
                'é›•å¡‘': 'ğŸ’ƒ',
                'ä¹å™¨': 'ğŸ¥',
                'ç»˜ç”»': 'ğŸ¨',
                'ä¹¦æ³•': 'ğŸ“œ',
                'ç‰å™¨': 'ğŸ’',
                'é‡‘é“¶å™¨': 'âœ¨'
            };
            return icons[category] || 'ğŸ›ï¸';
        }

        // æ˜¾ç¤ºæ–‡ç‰©åˆ—è¡¨
        function showArtifacts(dynasty, category) {
            dynastySelection.style.display = 'none';
            artifactsSection.style.display = 'block';
            
            currentPath.textContent = `${dynasty} > ${category}`;
            currentDynastyTitle.textContent = `${dynasty} Â· ${category}`;

            const artifacts = artifactsData[dynasty][category] || [];
            artifactsGrid.innerHTML = '';

            artifacts.forEach(artifact => {
                const artifactCard = document.createElement('div');
                artifactCard.className = 'artifact-card';
                artifactCard.innerHTML = `
                    <div class="artifact-image">
                        <div class="artifact-icon">${getCategoryIcon(category)}</div>
                        <div class="artifact-glow-effect"></div>
                    </div>
                    <div class="artifact-info">
                        <div class="artifact-header">
                            <h3 class="artifact-name">${artifact.title}</h3>
                            <div class="artifact-tags">
                                <span class="tag tag-dynasty">${dynasty}</span>
                                <span class="tag tag-category">${category}</span>
                            </div>
                        </div>
                        <p class="artifact-description">${artifact.description}</p>
                        <div class="artifact-features">
                            ${artifact.features.map(feature => `
                                <div class="feature-item">
                                    <span class="feature-icon">âœ¦</span>
                                    <span>${feature}</span>
                                </div>
                            `).join('')}
                        </div>
                        <div class="artifact-period">
                            <span class="period-label">å†å²æ—¶æœŸ:</span>
                            <span>${artifact.period}</span>
                        </div>
                        <button class="view-artifact-btn" data-model="${artifact.id}">
                            <span>3Dè§‚èµ</span>
                            <span class="btn-arrow">â†’</span>
                        </button>
                    </div>
                `;

                // æ·»åŠ ç‚¹å‡»äº‹ä»¶
                const viewBtn = artifactCard.querySelector('.view-artifact-btn');
                viewBtn.addEventListener('click', () => {
                    window.location.href = `main.html?model=${artifact.id}`;
                });

                // æ·»åŠ æ‚¬åœæ•ˆæœ
                artifactCard.addEventListener('mouseenter', function() {
                    this.style.transform = 'translateY(-8px)';
                    const glowEffect = this.querySelector('.artifact-glow-effect');
                    if (glowEffect) {
                        glowEffect.style.opacity = '0.6';
                    }
                });

                artifactCard.addEventListener('mouseleave', function() {
                    this.style.transform = 'translateY(0)';
                    const glowEffect = this.querySelector('.artifact-glow-effect');
                    if (glowEffect) {
                        glowEffect.style.opacity = '0.2';
                    }
                });

                artifactsGrid.appendChild(artifactCard);
            });
        }

        // è¿”å›æœä»£é€‰æ‹©
        backToDynasty.addEventListener('click', () => {
            artifactsSection.style.display = 'none';
            dynastySelection.style.display = 'block';
            currentPath.textContent = 'é€‰æ‹©æœä»£';
            currentDynasty = null;
            currentCategory = null;
        });

        // å…³é—­å¼¹çª—
        modalClose.addEventListener('click', () => {
            categoryModal.style.display = 'none';
        });

        // ç‚¹å‡»å¼¹çª—èƒŒæ™¯å…³é—­
        categoryModal.addEventListener('click', (e) => {
            if (e.target === categoryModal || e.target.classList.contains('modal-overlay')) {
                categoryModal.style.display = 'none';
            }
        });

        // æ·»åŠ æœä»£å¡ç‰‡æ‚¬åœæ•ˆæœ
        document.querySelectorAll('.dynasty-card').forEach(card => {
            card.addEventListener('mouseenter', function() {
                this.style.transform = 'translateY(-10px)';
            });

            card.addEventListener('mouseleave', function() {
                this.style.transform = 'translateY(0)';
            });
        });

        // æ»šåŠ¨æ•ˆæœ
        window.addEventListener('scroll', function() {
            const nav = document.querySelector('.museum-nav');
            if (window.scrollY > 100) {
                nav.style.background = 'rgba(255, 255, 255, 0.95)';
                nav.style.backdropFilter = 'blur(10px)';
            } else {
                nav.style.background = 'rgba(255, 255, 255, 0.9)';
                nav.style.backdropFilter = 'none';
            }
        });
    </script>
</body>
</html>
